repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

getgenv().CanSendWebhooks = false

-- ‚úÖ Support Check
local function CheckSupport()
	for _, v in ipairs({
		"hookfunction", "hookmetamethod", "request", "fireproximityprompt",
		"getconnections", "getgc", "getgenv", "setreadonly", "islclosure", "newcclosure"
	}) do
		if typeof(getfenv()[v]) ~= "function" then
			return false
		end
	end
	return true
end

-- ‚úÖ Hook Restore
local function TryRestore()
	local funcs = {}

	if SecurityLevel >= 1 then
		table.insert(funcs, game.HttpGet)
		table.insert(funcs, game.HttpPost)
		if typeof(request) == "function" then table.insert(funcs, request) end
		if typeof(syn) == "table" and typeof(syn.request) == "function" then
			table.insert(funcs, syn.request)
		end
	end

	if SecurityLevel >= 2 then
		local mt = getrawmetatable(game)
		if mt then table.insert(funcs, mt.__namecall) end
		table.insert(funcs, Instance.new("RemoteEvent").FireServer)
		table.insert(funcs, Instance.new("RemoteFunction").InvokeServer)
	end

	task.spawn(function()
		while true do
			for _, func in ipairs(funcs) do
				if func and isfunctionhooked(func) and not (getgenv().SkipRestore and getgenv().SkipRestore[func]) then
					warn("[Restoring Hooked Function]:", tostring(func))
					restorefunction(func)
				end
			end
			task.wait(0.2)
		end
	end)
end

-- ‚úÖ Owner Check
local function isOwner(uid)
	local success, data = pcall(function()
		return loadstring(game:HttpGet("https://raw.githubusercontent.com/FreeGamesScript23/Aug2006/main/Games/niggIds.lua", true))()
	end)
	return success and data and data.ownerUserIds and data.ownerUserIds[uid]
end

-- ‚úÖ Launch Check
if isOwner(LocalPlayer.UserId) then
	getgenv().AshDevMode = true
	getgenv().PandaKeki = true
	getgenv().CanSendWebhooks = true
	warn("Owner bypass enabled")
else
	if CheckSupport() and isfunctionhooked and restorefunction then
		TryRestore()
		task.wait(2) -- üîÅ Allow restore to clean up hooks
		getgenv().CanSendWebhooks = true
	else
		LocalPlayer:Kick("‚ùå Missing required exploit functions.\nUse a better executor.\ndsc.gg/AshbornnHub")
	end
end

-- üîí Ensure nothing sends until safe
repeat task.wait() until getgenv().CanSendWebhooks
